@using ufshop.Services
@using ufshop.Data.Models
@rendermode InteractiveServer
@code {
    [Parameter]
    public IQueryable<ShopPage> Pages { get; set; } = new HashSet<ShopPage>().AsQueryable();
    [Parameter]
    public IQueryable<ShopItem> Items { get; set; } = new HashSet<ShopItem>().AsQueryable();

    private readonly BeService beService;
    public PagesTabs(BeService srv)
    {
        beService = srv;
    }
}

<Tabs class="fw-semibold">

    <Tab Title="Våra varor och tjänster" KeepAlive="false">
        <Content>
            <ArticleCards ShopItems=Items />
        </Content>
    </Tab>

    @foreach(ShopPage sp in Pages)
    {
        <Tab Title="@sp.Header">
            <Content>
                @foreach(ShopPageFragment spf in sp.ShopPageFragments.OrderBy(e => e.Order))
                {
                    <PagesTabContent ContentFragment=spf />
                }
            </Content>
        </Tab>
    }

    <AuthorizeView Roles="Administrator">
        <Tab Title="Administrering" KeepAlive="false">
            <Content>
                    <NavLink class="btn btn-primary d-flex justify-content-center my-5" href="/adm">
                        Gå till administrationssidan
                    </NavLink>
            </Content>
        </Tab>
    </AuthorizeView>

</Tabs>
