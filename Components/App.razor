@using Microsoft.EntityFrameworkCore.Storage.ValueConversion
@using ufshop.Services
@inject ufshop.Services.BeService BeService
@code{

    public readonly bool ShopExists;
    public App(BeService beService)
    {
        beService.SetSaneValues();
        ShopExists = new ShopService(beService).ShopExists(beService.DomainPrefix);
    }
}
<!DOCTYPE html>
<html lang="sv">
<head>
    @* @BeService.SetSaneValues() *@
    @* <meta lol="@BeService.wwwroot" /> *@
    @if (!ShopExists)
    {
        @* TODO: REDIRECTA TILL WWW.UFSHOP.NU/DEAUTH *@
        <meta http-equiv="refresh" content="0; url=https://www.ufshop.nu:5001/">
    }
    else
    {
        @* TODO: kolla här om användaren är inloggad.
            Om användaren är inloggad, kolla att domänprefixet överensstämmer
            med den shop användaren är administratör över.
            beService.DomainPrefix inte är samma, redirecta användaren
            till rätt domännamn
         *@
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <base href="/" />
        @* <link rel="stylesheet" href="@Assets["lib/bootstrap/dist/css/bootstrap.min.css"]" />
        <link rel="stylesheet" href="@Assets["app.css"]" />
        <link rel="stylesheet" href="@Assets["ufshop.styles.css"]" /> *@


        @* <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css" /> *@
        @* BLAZOR BOOTSTRAP BEGIN *@
        @* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous"> *@
        @* <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"> *@
        <link rel="stylesheet" href="/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/css/bootstrap-icons.min.css" />
        <link rel="stylesheet" href="_content/Blazor.Bootstrap/blazor.bootstrap.css"  />
        @* BLAZOR BOOTSTRAP END *@

        <link rel="stylesheet" href="/app.css" />
        <link rel="stylesheet" href="/ufshop.styles.css" />


        <ImportMap />
        <link rel="icon" type="image/png" href="favicon.png" />
        <HeadOutlet />
    }
</head>
<body class="d-flex flex-column">
    @if (ShopExists)
    {
        <Routes />
        <script src="_framework/blazor.web.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
        @* <!-- Add chart.js reference if chart components are used in your application. --> *@
        @* <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.0.1/chart.umd.js" integrity="sha512-gQhCDsnnnUfaRzD8k1L5llCCV6O9HN09zClIzzeJ8OJ9MpGmIlCxm+pdCkqTwqJ4JcjbojFr79rl2F1mzcoLMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> *@
        @* <!-- Add chartjs-plugin-datalabels.min.js reference if chart components with data label feature is used in your application. --> *@
        @* <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js" integrity="sha512-JPcRR8yFa8mmCsfrw4TNte1ZvF1e3+1SdGMslZvmrzDYxS69J7J49vkFL8u6u8PlPJK+H3voElBtUCzaXj+6ig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> *@
        @* <!-- Add sortable.js reference if SortableList component is used in your application. --> *@
        @* <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script> *@
        <script src="_content/Blazor.Bootstrap/blazor.bootstrap.js"></script>
    }
</body>
</html>
